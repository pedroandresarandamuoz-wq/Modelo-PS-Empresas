<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auditor√≠a de Fricci√≥n Operacional (AFO) - Modelo SP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados para un look serio y profesional */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        .result-card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        .input-group label {
            font-weight: 600;
        }
        .zone-red { background-color: #fca5a5; color: #991b1b; }
        .zone-yellow { background-color: #fcd34d; color: #92400e; }
        .zone-green { background-color: #a7f3d0; color: #065f46; }
        .zone-dark-red { background-color: #ef4444; color: white; font-weight: bold; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white p-6 md:p-10 rounded-xl result-card">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-extrabold text-gray-800">Auditor√≠a de Fricci√≥n Operacional (AFO)</h1>
            <p class="text-xl text-gray-600 mt-2">Modelo de Prosperidad Sostenible (Tesis P.A. Aranda)</p>
        </header>

        <!-- Secci√≥n de Entrada de Datos (Input) -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 border-b pb-6 mb-6">
            <h2 class="md:col-span-2 text-2xl font-bold text-gray-700 mb-4 border-b pb-2">Entrada de M√©tricas Clave (Valores en Porcentaje de Facturaci√≥n)</h2>

            <!-- Fricci√≥n Operacional (C_H Equivalente) -->
            <div class="input-group">
                <label for="costo_burocracia" class="block text-sm text-gray-700">1. Burocracia/Procesos Lentos (ej. 5%):</label>
                <input type="number" id="costo_burocracia" value="5" min="0" max="100" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                <p class="text-xs text-gray-500 mt-1">Costo de errores, revisiones, reuniones internas ineficientes.</p>
            </div>
            <div class="input-group">
                <label for="riesgo_legal" class="block text-sm text-gray-700">2. Riesgo Legal/Litigios (ej. 2%):</label>
                <input type="number" id="riesgo_legal" value="2" min="0" max="100" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                <p class="text-xs text-gray-500 mt-1">Costos de cumplimiento, multas, indemnizaciones legales.</p>
            </div>
            <div class="input-group">
                <label for="perdida_valor" class="block text-sm text-gray-700">3. P√©rdida de Valor/Merma (ej. 3%):</label>
                <input type="number" id="perdida_valor" value="3" min="0" max="100" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                <p class="text-xs text-gray-500">Robo interno, inventario obsoleto, fraude de proveedores.</p>
            </div>
            <div class="input-group">
                <label for="ineficiencia_activos" class="block text-sm text-gray-700">4. Ineficiencia Activos/TI (ej. 5%):</label>
                <input type="number" id="ineficiencia_activos" value="5" min="0" max="100" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
                <p class="text-xs text-gray-500">Sistemas lentos, mal mantenimiento de maquinaria, tecnolog√≠a obsoleta.</p>
            </div>

            <!-- Par√°sito Visible (2G Equivalente) -->
            <div class="input-group md:col-span-2">
                <label for="costo_overhead" class="block text-sm text-gray-700 font-bold">5. Costo Overhead Improductivo (ej. 20%):</label>
                <input type="number" id="costo_overhead" value="20" min="0" max="100" class="mt-1 p-2 w-full border border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500">
                <p class="text-xs text-gray-500">Gasto en personal y servicios que NO generan valor directo (el equivalente al Gasto Consumo/2G).</p>
            </div>
        </section>
        
        <!-- Bot√≥n de C√°lculo -->
        <button onclick="calcularAFO()" class="w-full bg-blue-600 text-white p-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-300 shadow-md">
            Calcular Fricci√≥n Operacional Total ($\mathbf{FOT}$)
        </button>

        <!-- Secci√≥n de Resultados -->
        <section class="mt-8">
            <h2 class="text-2xl font-bold text-gray-700 mb-4 border-b pb-2">Veredicto Estructural del Modelo SP</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                
                <!-- Resultado 1: Fricci√≥n Operacional Total (TPL Equivalente) -->
                <div class="result-card p-4 rounded-xl text-center bg-gray-100">
                    <p class="text-sm text-gray-600 font-medium">Fricci√≥n Operacional Total (FOT)</p>
                    <p id="resultado_fot" class="text-3xl font-extrabold mt-1 text-gray-800">0.00%</p>
                    <p class="text-xs text-gray-500 mt-1">(Equivalente a Carga Parasitaria Total TPL)</p>
                </div>

                <!-- Resultado 2: Prosperidad Neta Operacional (P_NO) -->
                <div id="card_pno" class="result-card p-4 rounded-xl text-center zone-green">
                    <p class="text-sm font-medium">Prosperidad Neta Operacional ($\mathbf{P}_{\text{NO}}$)</p>
                    <p id="resultado_pno" class="text-3xl font-extrabold mt-1">0.00%</p>
                    <p class="text-xs font-medium opacity-80 mt-1">(Equivalente a Prosperidad Neta $\mathbf{P}_{\mathbf{N}}$)</p>
                </div>

            </div>

            <!-- Diagn√≥stico de Fricci√≥n -->
            <div class="mt-6 p-4 rounded-lg zone-green result-card">
                <p class="font-bold text-lg mb-1" id="diagnostico_titulo">Veredicto:</p>
                <p id="diagnostico_texto" class="text-sm">Inicie el c√°lculo para ver el diagn√≥stico estructural de su empresa.</p>
            </div>
            
            <!-- Zona de Acci√≥n -->
            <div class="mt-6">
                <h3 class="text-lg font-semibold text-gray-700">Mandato Operativo (Seg√∫n $\mathbf{FOT}$):</h3>
                <ul id="mandato_lista" class="list-disc list-inside text-gray-600 mt-2 ml-4">
                    <li>Reduzca la FOT para liberar el Flujo de Caja Libre.</li>
                </ul>
            </div>
        </section>
    </div>

    <script>
        function calcularAFO() {
            // 1. Obtener valores de entrada como porcentaje (ej. 5)
            const Burocracia = parseFloat(document.getElementById('costo_burocracia').value) || 0;
            const RiesgoLegal = parseFloat(document.getElementById('riesgo_legal').value) || 0;
            const PerdidaValor = parseFloat(document.getElementById('perdida_valor').value) || 0;
            const IneficienciaActivos = parseFloat(document.getElementById('ineficiencia_activos').value) || 0;
            const OverheadImproductivo = parseFloat(document.getElementById('costo_overhead').value) || 0;

            // 2. Calcular Carga Oculta Operacional (C_HO) - Equivalente a C_H
            // C_HO es la suma de los costos de fricci√≥n internos
            const C_HO = Burocracia + RiesgoLegal + PerdidaValor + IneficienciaActivos;

            // 3. Aplicar la Ley del Doble Costo (2G) al Overhead Improductivo (Equivalente a G_cons)
            // Este es el costo m√°s destructivo
            const CostoDobleG = OverheadImproductivo * 2;

            // 4. Calcular Fricci√≥n Operacional Total (FOT) - Equivalente a TPL
            // FOT = C_HO + CostoDobleG
            const FOT = C_HO + CostoDobleG;

            // 5. Calcular Prosperidad Neta Operacional (P_NO) - Equivalente a P_N
            // P_NO = 100% - FOT
            const P_NO = 100 - FOT;

            // 6. Mostrar resultados
            document.getElementById('resultado_fot').textContent = FOT.toFixed(2) + '%';
            document.getElementById('resultado_pno').textContent = P_NO.toFixed(2) + '%';

            // 7. Diagn√≥stico y Colores (Zonas de Veredicto)
            const cardPNO = document.getElementById('card_pno');
            const diagnosticoTitulo = document.getElementById('diagnostico_titulo');
            const diagnosticoTexto = document.getElementById('diagnostico_texto');
            const mandatoLista = document.getElementById('mandato_lista');

            // Resetear clases de color
            cardPNO.className = 'result-card p-4 rounded-xl text-center';
            diagnosticoTitulo.className = 'font-bold text-lg mb-1';

            // L√≥gica de Zonas
            if (P_NO < 0) {
                // Zona ROJA OSCURO: Destrucci√≥n activa de capital (Quiebra Estructural)
                cardPNO.classList.add('zone-dark-red');
                diagnosticoTitulo.classList.add('zone-dark-red');
                diagnosticoTitulo.textContent = 'üö® ¬°ALERTA ROJA! - DESTRUCCI√ìN ACTIVA';
                diagnosticoTexto.textContent = 'Su FOT (Fricci√≥n Operacional Total) supera el 100%. Su empresa est√° consumiendo su capital neto anualmente. La irresponsabilidad operativa es insostenible.';
                mandatoLista.innerHTML = `
                    <li>**Mandato de Implosi√≥n:** Reducci√≥n inmediata y dr√°stica del Overhead Improductivo (2G).</li>
                    <li>**Auditor√≠a Forense:** Eliminar las fuentes de Burocracia y P√©rdida de Valor (C_HO).</li>
                `;
            } else if (P_NO >= 0 && P_NO < 10) {
                // Zona NARANJA: Estancamiento Cr√≠tico
                cardPNO.classList.add('zone-yellow');
                diagnosticoTitulo.classList.add('zone-yellow');
                diagnosticoTitulo.textContent = '‚ö†Ô∏è ZONA NARANJA - ESTANCAMIENTO CR√çTICO';
                diagnosticoTexto.textContent = 'Su P_NO es marginal. La empresa est√° al borde de la quiebra. La alta fricci√≥n est√° drenando casi toda la riqueza potencial.';
                mandatoLista.innerHTML = `
                    <li>**Urgencia:** Iniciar la "Doble Sierra": Reducir 2G y C_HO simult√°neamente.</li>
                    <li>**Enfoque:** La FOT debe caer al menos 10 puntos para asegurar la solvencia.</li>
                `;
            } else if (P_NO >= 10 && P_NO < 30) {
                // Zona AMARILLA: Solvencia Ineficiente
                cardPNO.classList.add('zone-yellow');
                diagnosticoTitulo.classList.add('zone-yellow');
                diagnosticoTitulo.textContent = 'üü° ZONA AMARILLA - SOLVENCIA INEFICIENTE';
                diagnosticoTexto.textContent = 'La empresa es solvente, pero su FOT es demasiado alta. Est√° dejando pasar una gran oportunidad de acumulaci√≥n de capital.';
                mandatoLista.innerHTML = `
                    <li>**Prioridad:** Optimizar la Burocracia y la Ineficiencia de Activos (C_HO).</li>
                    <li>**Potencial:** Una reducci√≥n del 5% en FOT podr√≠a duplicar su P_NO.</li>
                `;
            } else {
                // Zona VERDE: Responsabilidad Operacional (√âlite)
                cardPNO.classList.add('zone-green');
                diagnosticoTitulo.classList.add('zone-green');
                diagnosticoTitulo.textContent = '‚úÖ ZONA VERDE - LIDERAZGO EN EFICIENCIA';
                diagnosticoTexto.textContent = 'Su Prosperidad Neta Operacional es robusta. La gesti√≥n del Par√°sito es ejemplar. Su empresa est√° maximizando la acumulaci√≥n de capital.';
                mandatoLista.innerHTML = `
                    <li>**Vigilancia:** Mantener el control de 2G y buscar el 1% de optimizaci√≥n.</li>
                    <li>**Inversi√≥n:** Canalizar el FCL (P_NO) a inversi√≥n productiva y expansi√≥n.</li>
                `;
            }
        }

        // Ejecutar el c√°lculo inicial al cargar la p√°gina
        window.onload = calcularAFO;
    </script>
</body>
</html>
